<!DOCTYPE html>
<html>
    <head>
        <meta
            http-equiv="Content-Type"
            content="text/html; charset=UTF-8"
        />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, user-scalable=no"
        />
        <title>Electro Store Admin</title>
        <link rel="icon" type="image/svg+xml" href="/static/logo.svg" />

        <!-- Electro Store Admin Branding -->
        <style>
          .es-logo {
            display: flex;
            justify-content: center;
            padding-bottom: 4px;
          }
          .es-logo svg {
            width: 72px;
            height: 72px;
          }
        </style>
        <script>
          ;(function () {
            var LOGO_SVG =
              '<svg viewBox="820 820 2360 2360" fill="currentColor">' +
              '<path fill-rule="evenodd" clip-rule="evenodd" d="M1742.075,2062.26l197.432,341.959l184.532,319.615h661.448v-243.507h-520.862l-241.376-418.068H1742.075z M2124.038,1276.164l-188.023,325.666l-178.96,309.969l281.172,0.004l226.398-392.132l520.862-0.003v-243.505H2124.038z"/>' +
              '<polygon fill-rule="evenodd" clip-rule="evenodd" points="1737.643,1093.916 1214.513,1999.999 1737.643,2906.083 1878.228,3149.587 2159.403,3149.587 2785.487,3149.587 2785.487,2906.083 2180.85,2906.083 2018.818,2906.083 1495.689,1999.999 2018.818,1093.916 2180.85,1093.916 2785.487,1093.916 2785.487,850.413 2159.403,850.413 1878.228,850.413"/>' +
              '<path fill-rule="evenodd" clip-rule="evenodd" d="M1776.425,1878.245c-23.432,40.587-46.863,81.169-70.294,121.755c23.432,40.584,46.862,81.17,70.294,121.752h1009.062v-243.507H1776.425z"/>' +
              '</svg>'

            var LOGO_MINI =
              '<svg viewBox="820 820 2360 2360" fill="currentColor" style="width:16px;height:16px">' +
              '<path fill-rule="evenodd" clip-rule="evenodd" d="M1742.075,2062.26l197.432,341.959l184.532,319.615h661.448v-243.507h-520.862l-241.376-418.068H1742.075z M2124.038,1276.164l-188.023,325.666l-178.96,309.969l281.172,0.004l226.398-392.132l520.862-0.003v-243.505H2124.038z"/>' +
              '<polygon fill-rule="evenodd" clip-rule="evenodd" points="1737.643,1093.916 1214.513,1999.999 1737.643,2906.083 1878.228,3149.587 2159.403,3149.587 2785.487,3149.587 2785.487,2906.083 2180.85,2906.083 2018.818,2906.083 1495.689,1999.999 2018.818,1093.916 2180.85,1093.916 2785.487,1093.916 2785.487,850.413 2159.403,850.413 1878.228,850.413"/>' +
              '<path fill-rule="evenodd" clip-rule="evenodd" d="M1776.425,1878.245c-23.432,40.587-46.863,81.169-70.294,121.755c23.432,40.584,46.862,81.17,70.294,121.752h1009.062v-243.507H1776.425z"/>' +
              '</svg>'

            function applyBranding() {
              // Replace "Welcome to Medusa" headings
              document.querySelectorAll("h1, h2").forEach(function (el) {
                if (el.textContent === "Welcome to Medusa") {
                  el.textContent = "Welcome to Electro Store"
                }
              })

              // Find Medusa logo SVGs and replace their immediate container
              var selectors = [
                'svg[viewBox="0 0 400 400"]',
                'svg[viewBox="0 0 36 38"]',
              ]
              selectors.forEach(function (sel) {
                document.querySelectorAll(sel).forEach(function (svg) {
                  // Walk up to the styled container (has bg-ui-button class)
                  var container = svg.parentElement
                  while (
                    container &&
                    !container.className.toString().includes("bg-ui-button")
                  ) {
                    container = container.parentElement
                  }
                  // Fallback to direct parent if walk-up didn't find it
                  if (!container) container = svg.parentElement
                  if (!container || container.dataset.esBranded) return
                  container.dataset.esBranded = "true"
                  container.style.display = "none"
                  // Insert our clean logo as a sibling
                  var logoEl = document.createElement("div")
                  logoEl.className = "es-logo"
                  logoEl.innerHTML = LOGO_SVG
                  container.parentElement.insertBefore(logoEl, container)
                })
              })

              // Replace sidebar store avatar (the "E" initial) with our logo
              document.querySelectorAll("span").forEach(function (el) {
                if (
                  el.textContent.trim() === "E" &&
                  el.children.length === 0 &&
                  el.className.toString().includes("bg-ui-bg-component") &&
                  !el.dataset.esBranded
                ) {
                  el.dataset.esBranded = "true"
                  el.textContent = ""
                  el.innerHTML = LOGO_MINI
                }
              })
            }

            new MutationObserver(applyBranding).observe(
              document.documentElement,
              { childList: true, subtree: true }
            )
          })()
        </script>
    </head>

    <body>
        <div id="medusa"></div>
        <script type="module" src="./entry.jsx"></script>
    </body>
</html>
